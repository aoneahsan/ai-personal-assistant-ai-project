!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ProductAdoptionWidget=e():t.ProductAdoptionWidget=e()}("undefined"!=typeof self?self:this,()=>(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function n(t){const e=t.getBoundingClientRect(),n=window.pageYOffset||document.documentElement.scrollTop,i=window.pageXOffset||document.documentElement.scrollLeft;return{top:e.top+n,left:e.left+i,bottom:e.bottom+n,right:e.right+i,width:e.width,height:e.height,viewportTop:e.top,viewportLeft:e.left}}function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=document.createElement(t);return Object.entries(e).forEach(t=>{let[e,n]=t;if("className"===e)i.className=n;else if("style"===e&&"object"==typeof n)Object.assign(i.style,n);else if(e.startsWith("on")&&"function"==typeof n){const t=e.slice(2).toLowerCase();i.addEventListener(t,n)}else i.setAttribute(e,n)}),n&&("string"==typeof n?i.textContent=n:Array.isArray(n)?n.forEach(t=>{t instanceof Element?i.appendChild(t):"string"==typeof t&&i.appendChild(document.createTextNode(t))}):n instanceof Element&&i.appendChild(n)),i}function s(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]?requestAnimationFrame(()=>{t.classList.add(e)}):t.classList.add(e)}function o(t,e){t.classList.remove(e)}t.d(e,{default:()=>P});const r={apiEndpoint:null,apiKey:null,tours:[],autoStart:!1,startDelay:0,theme:"light",position:"bottom-right",zIndex:999999,backdrop:!0,backdropColor:"rgba(0, 0, 0, 0.7)",animation:!0,animationDuration:300,closeOnBackdropClick:!0,closeOnEscape:!0,showStepNumbers:!0,showProgressBar:!0,analytics:{enabled:!0,trackEvents:!0,trackProgress:!0,customTracker:null},storage:{enabled:!0,key:"product-adoption-widget",type:"localStorage"},debug:!1,containerSelector:"body",customStyles:null,callbacks:{onInit:null,onStart:null,onStep:null,onComplete:null,onSkip:null,onError:null}},a={title:"",content:"",target:null,placement:"bottom",backdrop:!0,buttons:{next:"Next",prev:"Previous",skip:"Skip",done:"Done"},allowInteraction:!1,scrollTo:!0,scrollOffset:100},l="widget:init",h="widget:ready",c="tour:start",d="tour:complete",p="tour:skip",u="step:change",g="step:complete",m="widget:error",f="paw-tooltip",w="paw-backdrop",v="paw-highlight",b="paw-button",y="paw-button-primary",k="paw-button-secondary",T="paw-progress-bar",S="paw-close",x={top:{main:"top",cross:"center"},"top-start":{main:"top",cross:"start"},"top-end":{main:"top",cross:"end"},bottom:{main:"bottom",cross:"center"},"bottom-start":{main:"bottom",cross:"start"},"bottom-end":{main:"bottom",cross:"end"},left:{main:"left",cross:"center"},"left-start":{main:"left",cross:"start"},"left-end":{main:"left",cross:"end"},right:{main:"right",cross:"center"},"right-start":{main:"right",cross:"start"},"right-end":{main:"right",cross:"end"}};class E{constructor(t){this.config=t,this.element=null,this.targetElement=null,this.callbacks=null,this.isVisible=!1}createElement(){this.element||(this.element=i("div",{className:`${f} ${f}-${this.config.theme}`,style:{position:"absolute",zIndex:this.config.zIndex+1,opacity:"0",transition:`opacity ${this.config.animationDuration}ms ease-in-out`}}),document.body.appendChild(this.element))}show(t,e,n){this.targetElement=t,this.callbacks=n,this.createElement(),this.element.innerHTML=this.buildContent(e),this.setupEventListeners(),this.position(t,e.placement),this.config.animation?requestAnimationFrame(()=>{this.element.style.opacity="1",s(this.element,"paw-tooltip-active",!0)}):(this.element.style.opacity="1",s(this.element,"paw-tooltip-active")),this.isVisible=!0}hide(){this.element&&this.isVisible&&(this.element.style.opacity="0",o(this.element,"paw-tooltip-active"),setTimeout(()=>{this.element&&(this.element.innerHTML="",this.removeEventListeners())},this.config.animationDuration),this.isVisible=!1)}buildContent(t){const e=this.config.showProgressBar&&t.totalSteps>1;return`\n      <div class="paw-tooltip-header">\n        ${this.config.showStepNumbers&&t.totalSteps>1?`\n          <div class="paw-tooltip-step-number">\n            Step ${t.stepIndex+1} of ${t.totalSteps}\n          </div>\n        `:""}\n        <button class="paw-tooltip-close ${S}" data-action="close">\n          <svg width="14" height="14" viewBox="0 0 14 14" fill="none">\n            <path d="M13 1L1 13M1 1L13 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n          </svg>\n        </button>\n      </div>\n      \n      ${t.title?`\n        <div class="paw-tooltip-title">${t.title}</div>\n      `:""}\n      \n      ${t.content?`\n        <div class="paw-tooltip-content">${t.content}</div>\n      `:""}\n      \n      ${e?`\n        <div class="paw-tooltip-progress">\n          <div class="${T}">\n            <div class="paw-progress-fill" style="width: ${t.progress}%"></div>\n          </div>\n        </div>\n      `:""}\n      \n      <div class="paw-tooltip-footer">\n        <div class="paw-tooltip-buttons">\n          ${t.isFirst?"":`\n            <button class="${b} ${k}" data-action="prev">\n              ${t.buttons.prev}\n            </button>\n          `}\n          \n          ${t.isLast?"":`\n            <button class="${b} ${k}" data-action="skip">\n              ${t.buttons.skip}\n            </button>\n          `}\n          \n          <button class="${b} ${y}" data-action="${t.isLast?"done":"next"}">\n            ${t.isLast?t.buttons.done:t.buttons.next}\n          </button>\n        </div>\n      </div>\n    `}position(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";const i=this.element.getBoundingClientRect(),s=10;let o,r;if(t){const a=n(t),l=x[e]||x.bottom;switch(l.main){case"top":o=a.viewportTop-i.height-s;break;case"bottom":o=a.viewportTop+a.height+s;break;case"left":r=a.viewportLeft-i.width-s;break;case"right":r=a.viewportLeft+a.width+s}if("top"===l.main||"bottom"===l.main)switch(l.cross){case"start":r=a.viewportLeft;break;case"end":r=a.viewportLeft+a.width-i.width;break;default:r=a.viewportLeft+(a.width-i.width)/2}else switch(l.cross){case"start":o=a.viewportTop;break;case"end":o=a.viewportTop+a.height-i.height;break;default:o=a.viewportTop+(a.height-i.height)/2}o=Math.max(s,Math.min(o,window.innerHeight-i.height-s)),r=Math.max(s,Math.min(r,window.innerWidth-i.width-s))}else o=(window.innerHeight-i.height)/2,r=(window.innerWidth-i.width)/2;this.element.style.top=`${o}px`,this.element.style.left=`${r}px`}setupEventListeners(){this.element&&(this.handleClick=t=>{const e=t.target.closest("[data-action]");if(!e)return;switch(e.dataset.action){case"next":case"done":this.callbacks.onNext&&this.callbacks.onNext();break;case"prev":this.callbacks.onPrev&&this.callbacks.onPrev();break;case"skip":this.callbacks.onSkip&&this.callbacks.onSkip();break;case"close":this.callbacks.onClose&&this.callbacks.onClose()}},this.element.addEventListener("click",this.handleClick),this.handleResize=()=>{this.targetElement&&this.isVisible&&this.position(this.targetElement)},window.addEventListener("resize",this.handleResize))}removeEventListeners(){this.element&&this.handleClick&&this.element.removeEventListener("click",this.handleClick),this.handleResize&&window.removeEventListener("resize",this.handleResize)}destroy(){this.hide(),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.targetElement=null,this.callbacks=null}}class I{constructor(t){this.config=t,this.element=null,this.isVisible=!1,this.onClick=null}createElement(){this.element||(this.element=i("div",{className:w,style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:this.config.backdropColor,zIndex:this.config.zIndex,opacity:"0",transition:`opacity ${this.config.animationDuration}ms ease-in-out`,pointerEvents:this.config.closeOnBackdropClick?"auto":"none"}}),document.body.appendChild(this.element))}show(){this.createElement(),this.config.closeOnBackdropClick&&(this.onClick=t=>{if(t.target===this.element){const t=new CustomEvent("backdrop:click");document.dispatchEvent(t)}},this.element.addEventListener("click",this.onClick)),this.config.animation?requestAnimationFrame(()=>{this.element.style.opacity="1",s(this.element,"paw-backdrop-active",!0)}):(this.element.style.opacity="1",s(this.element,"paw-backdrop-active")),this.isVisible=!0}hide(){this.element&&this.isVisible&&(this.onClick&&(this.element.removeEventListener("click",this.onClick),this.onClick=null),this.element.style.opacity="0",o(this.element,"paw-backdrop-active"),this.isVisible=!1)}updateColor(t){this.element&&(this.element.style.backgroundColor=t)}destroy(){this.hide(),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null}}class ${constructor(t){this.config=t,this.element=null,this.targetElement=null,this.isVisible=!1}createElement(){this.element||(this.element=i("div",{className:v,style:{position:"absolute",pointerEvents:"none",zIndex:this.config.zIndex+1,border:"2px solid #0066ff",borderRadius:"4px",opacity:"0",transition:`all ${this.config.animationDuration}ms ease-in-out`,boxShadow:"0 0 0 4px rgba(0, 102, 255, 0.2)"}}),document.body.appendChild(this.element))}highlight(t){t&&(this.targetElement=t,this.createElement(),this.position(),this.config.animation?requestAnimationFrame(()=>{this.element.style.opacity="1",s(this.element,"paw-highlight-active",!0)}):(this.element.style.opacity="1",s(this.element,"paw-highlight-active")),this.setupResizeObserver(),this.isVisible=!0)}position(){if(!this.targetElement||!this.element)return;const t=n(this.targetElement);this.element.style.top=t.top-4+"px",this.element.style.left=t.left-4+"px",this.element.style.width=`${t.width+8}px`,this.element.style.height=`${t.height+8}px`}setupResizeObserver(){window.ResizeObserver&&this.targetElement&&(this.resizeObserver=new ResizeObserver(()=>{this.isVisible&&this.position()}),this.resizeObserver.observe(this.targetElement),this.handleResize=()=>{this.isVisible&&this.position()},window.addEventListener("resize",this.handleResize),window.addEventListener("scroll",this.handleResize))}cleanupResizeObserver(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.handleResize&&(window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleResize),this.handleResize=null)}hide(){this.element&&this.isVisible&&(this.element.style.opacity="0",o(this.element,"paw-highlight-active"),this.cleanupResizeObserver(),this.isVisible=!1,this.targetElement=null)}updateStyle(t){this.element&&Object.assign(this.element.style,t)}destroy(){this.hide(),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null}}class C{constructor(t,e,n){this.config=t,this.eventBus=e,this.storage=n,this.tours=[],this.activeTour=null,this.currentStep=0,this.tooltip=new E(t),this.backdrop=new I(t),this.highlighter=new $(t),this.isActive=this.isActive.bind(this),this.nextStep=this.nextStep.bind(this),this.prevStep=this.prevStep.bind(this),this.endTour=this.endTour.bind(this)}setTours(t){this.tours=t.map(t=>({...t,steps:t.steps.map(t=>({...a,...t}))}))}getTours(){return this.tours}getTour(t){return this.tours.find(e=>e.id===t)||null}getFirstAvailableTour(){const t=this.storage.get("completedTours")||[];return this.tours.find(e=>(!e.showOnce||!t.includes(e.id))&&(!e.condition||"function"!=typeof e.condition||e.condition()))||null}isActive(){return null!==this.activeTour}startTour(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isActive()&&this.endTour();const n=this.getTour(t);if(!n)return!1;try{return this.activeTour=n,this.currentStep=e,this.storage.set("currentProgress",{tourId:n.id,step:e,startedAt:Date.now()}),this.eventBus.emit(c,{tourId:n.id,totalSteps:n.steps.length}),this.showStep(e),!0}catch(t){return this.endTour(),!1}}async showStep(t){if(!this.activeTour||t<0||t>=this.activeTour.steps.length)return;const e=this.activeTour.steps[t],n=function(t,e){const n=[];t.content||t.title||n.push(`Step ${e} must have either content or title`),t.target&&"string"!=typeof t.target&&n.push(`Step ${e} target must be a CSS selector string`);const i=["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"];return t.placement&&!i.includes(t.placement)&&n.push(`Step ${e} placement must be one of: ${i.join(", ")}`),{valid:0===n.length,errors:n}}(e,t);if(n.valid)try{this.tooltip.hide(),this.backdrop.hide(),this.highlighter.hide();let n=null;e.target&&(n=await function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;return new Promise(n=>{const i=document.querySelector(t);if(i)return void n(i);const s=new MutationObserver((e,i)=>{const s=document.querySelector(t);s&&(i.disconnect(),n(s))});s.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{s.disconnect(),n(null)},e)})}(e.target,5e3)),n&&e.scrollTo&&await function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return new Promise(n=>{const i=t.getBoundingClientRect(),s=window.pageYOffset||document.documentElement.scrollTop,o=i.top+s-e;window.scrollTo({top:o,behavior:"smooth"}),setTimeout(n,500)})}(n,e.scrollOffset),e.backdrop&&this.config.backdrop&&this.backdrop.show(n),n&&this.highlighter.highlight(n);const i={...e,stepIndex:t,totalSteps:this.activeTour.steps.length,isFirst:0===t,isLast:t===this.activeTour.steps.length-1,progress:(t+1)/this.activeTour.steps.length*100};this.tooltip.show(n,i,{onNext:this.nextStep,onPrev:this.prevStep,onSkip:()=>this.skipTour(),onClose:this.endTour}),this.currentStep=t,this.storage.set("currentProgress",{tourId:this.activeTour.id,step:t,updatedAt:Date.now()}),this.eventBus.emit(u,{tourId:this.activeTour.id,stepIndex:t,step:i})}catch(t){this.endTour()}}nextStep(){if(!this.activeTour)return;const t=this.currentStep+1;t>=this.activeTour.steps.length?this.completeTour():this.showStep(t)}prevStep(){if(!this.activeTour)return;const t=this.currentStep-1;t>=0&&this.showStep(t)}goToStep(t){this.activeTour&&t>=0&&t<this.activeTour.steps.length&&this.showStep(t)}skipTour(){if(!this.activeTour)return;const t=this.activeTour.id;this.eventBus.emit(p,{tourId:t,skippedAt:this.currentStep,totalSteps:this.activeTour.steps.length}),this.endTour()}completeTour(){if(!this.activeTour)return;const t=this.activeTour.id,e=this.storage.get("completedTours")||[];e.includes(t)||(e.push(t),this.storage.set("completedTours",e)),this.eventBus.emit(d,{tourId:t,totalSteps:this.activeTour.steps.length,completedAt:Date.now()}),this.endTour()}endTour(){this.activeTour&&(this.tooltip.hide(),this.backdrop.hide(),this.highlighter.hide(),this.storage.remove("currentProgress"),this.activeTour=null,this.currentStep=0)}getProgress(){return this.activeTour?{active:!0,tourId:this.activeTour.id,currentStep:this.currentStep,totalSteps:this.activeTour.steps.length,progress:(this.currentStep+1)/this.activeTour.steps.length*100}:{active:!1,tourId:null,currentStep:0,totalSteps:0,progress:0}}reset(){this.endTour(),this.tours=[]}destroy(){this.endTour(),this.tooltip.destroy(),this.backdrop.destroy(),this.highlighter.destroy()}}class z{constructor(){this.events=new Map}on(t,e){this.events.has(t)||this.events.set(t,[]),this.events.get(t).push(e)}off(t,e){if(!this.events.has(t))return;const n=this.events.get(t),i=n.indexOf(e);i>-1&&n.splice(i,1),0===n.length&&this.events.delete(t)}emit(t,e){if(!this.events.has(t))return;this.events.get(t).forEach(t=>{try{t(e)}catch(t){}})}removeAllListeners(t){t?this.events.delete(t):this.events.clear()}}class A{constructor(t){this.config=t,this.storageKey=t.key||"product-adoption-widget",this.storageType=t.type||"localStorage",this.enabled=!1!==t.enabled}getStorage(){if(!this.enabled)return null;switch(this.storageType){case"localStorage":return"undefined"!=typeof localStorage?localStorage:null;case"sessionStorage":return"undefined"!=typeof sessionStorage?sessionStorage:null;default:return null}}get(t){if(!this.enabled)return null;try{if("cookie"===this.storageType)return this.getCookie(`${this.storageKey}_${t}`);const e=this.getStorage();if(!e)return null;const n=e.getItem(this.storageKey);if(!n)return null;return JSON.parse(n)[t]||null}catch(t){return null}}set(t,e){if(this.enabled)try{if("cookie"===this.storageType)return void this.setCookie(`${this.storageKey}_${t}`,e);const n=this.getStorage();if(!n)return;const i=n.getItem(this.storageKey),s=i?JSON.parse(i):{};s[t]=e,n.setItem(this.storageKey,JSON.stringify(s))}catch(t){}}remove(t){if(this.enabled)try{if("cookie"===this.storageType)return void this.deleteCookie(`${this.storageKey}_${t}`);const e=this.getStorage();if(!e)return;const n=e.getItem(this.storageKey);if(!n)return;const i=JSON.parse(n);delete i[t],0===Object.keys(i).length?e.removeItem(this.storageKey):e.setItem(this.storageKey,JSON.stringify(i))}catch(t){}}clear(){if(this.enabled)try{if("cookie"===this.storageType)return void document.cookie.split(";").forEach(t=>{const e=t.indexOf("="),n=e>-1?t.substr(0,e).trim():t.trim();n.startsWith(this.storageKey)&&this.deleteCookie(n)});const t=this.getStorage();t&&t.removeItem(this.storageKey)}catch(t){}}getCookie(t){const e=`; ${document.cookie}`.split(`; ${t}=`);if(2===e.length){const t=e.pop().split(";").shift();try{return JSON.parse(decodeURIComponent(t))}catch{return t}}return null}setCookie(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;const i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);const s=`expires=${i.toUTCString()}`,o="object"==typeof e?JSON.stringify(e):e;document.cookie=`${t}=${encodeURIComponent(o)};${s};path=/;SameSite=Lax`}deleteCookie(t){document.cookie=`${t}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`}}class L{constructor(t,e){this.config=t,this.eventBus=e,this.sessionId=this.generateSessionId(),this.events=[]}initialize(){this.config.enabled&&(this.config.trackEvents&&this.subscribeToEvents(),this.track("widget_initialized",{sessionId:this.sessionId,timestamp:Date.now()}))}subscribeToEvents(){this.eventBus.on(c,t=>{this.track("tour_started",{tourId:t.tourId,totalSteps:t.totalSteps})}),this.eventBus.on(d,t=>{this.track("tour_completed",{tourId:t.tourId,totalSteps:t.totalSteps,duration:Date.now()-t.startedAt})}),this.eventBus.on(p,t=>{this.track("tour_skipped",{tourId:t.tourId,skippedAt:t.skippedAt,totalSteps:t.totalSteps})}),this.config.trackProgress&&(this.eventBus.on(u,t=>{this.track("step_viewed",{tourId:t.tourId,stepIndex:t.stepIndex,stepTitle:t.step.title})}),this.eventBus.on(g,t=>{this.track("step_completed",{tourId:t.tourId,stepIndex:t.stepIndex})})),this.eventBus.on(m,t=>{this.track("widget_error",{error:t.error.message,context:t.context})})}track(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.config.enabled)return;const n={name:t,data:{...e,sessionId:this.sessionId,timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent}};if(this.events.push(n),this.config.customTracker&&"function"==typeof this.config.customTracker)try{this.config.customTracker(n)}catch(t){}this.sendToAnalytics(n)}sendToAnalytics(t){"function"==typeof window.gtag&&window.gtag("event",t.name,{event_category:"ProductAdoptionWidget",event_label:t.data.tourId||"general",value:t.data.stepIndex||0,custom_data:t.data}),"function"==typeof window.ga&&window.ga("send","event",{eventCategory:"ProductAdoptionWidget",eventAction:t.name,eventLabel:t.data.tourId||"general",eventValue:t.data.stepIndex||0}),"object"==typeof window.analytics&&window.analytics.track&&window.analytics.track(t.name,t.data),"object"==typeof window.mixpanel&&window.mixpanel.track&&window.mixpanel.track(t.name,t.data),"object"==typeof window.amplitude&&window.amplitude.track&&window.amplitude.track(t.name,t.data),"object"==typeof window.posthog&&window.posthog.capture&&window.posthog.capture(t.name,t.data),this.config.endpoint&&this.sendToEndpoint(t)}async sendToEndpoint(t){try{await fetch(this.config.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(t){}}getEvents(){return this.events}clearEvents(){this.events=[]}generateSessionId(){return`paw-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}destroy(){this.events.length>0&&this.config.endpoint&&this.sendToEndpoint({name:"session_end",data:{sessionId:this.sessionId,totalEvents:this.events.length,events:this.events}}),this.clearEvents()}}let O=!1;function B(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class N{constructor(t){B(this,"handleKeyDown",t=>{"Escape"===t.key&&this.tourEngine.isActive()&&this.tourEngine.endTour()}),this.config=t,this.instanceId=t.instanceId,this.container=null,this.tourEngine=null,this.eventBus=new z,this.storage=new A(t.storage),this.analytics=new L(t.analytics,this.eventBus),this.initialized=!1,this.destroyed=!1,this.initialize=this.initialize.bind(this),this.destroy=this.destroy.bind(this),this.startTour=this.startTour.bind(this)}async initialize(){if(!this.initialized&&!this.destroyed)try{!function(t){if(O)return;const e="product-adoption-widget-styles";if(document.getElementById(e))return void(O=!0);let n=function(t){t.theme;const e="#0066ff",n=t.animationDuration||300;return`\n    /* Widget Container */\n    .paw-widget-container {\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n      font-size: 14px;\n      line-height: 1.5;\n      color: #333;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n    }\n\n    /* Tooltip Styles */\n    .paw-tooltip {\n      background: white;\n      border-radius: 8px;\n      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.12);\n      max-width: 400px;\n      min-width: 300px;\n      pointer-events: auto;\n    }\n\n    .paw-tooltip-dark {\n      background: #1a1a1a;\n      color: #ffffff;\n    }\n\n    .paw-tooltip-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 16px 20px 0;\n    }\n\n    .paw-tooltip-step-number {\n      font-size: 12px;\n      color: #666;\n      font-weight: 500;\n    }\n\n    .paw-tooltip-dark .paw-tooltip-step-number {\n      color: #999;\n    }\n\n    .paw-tooltip-close {\n      background: none;\n      border: none;\n      cursor: pointer;\n      padding: 4px;\n      color: #666;\n      transition: color ${n}ms ease;\n    }\n\n    .paw-tooltip-close:hover {\n      color: #333;\n    }\n\n    .paw-tooltip-dark .paw-tooltip-close {\n      color: #999;\n    }\n\n    .paw-tooltip-dark .paw-tooltip-close:hover {\n      color: #fff;\n    }\n\n    .paw-tooltip-title {\n      font-size: 18px;\n      font-weight: 600;\n      padding: 12px 20px 8px;\n      color: #111;\n    }\n\n    .paw-tooltip-dark .paw-tooltip-title {\n      color: #fff;\n    }\n\n    .paw-tooltip-content {\n      padding: 0 20px 16px;\n      color: #555;\n    }\n\n    .paw-tooltip-dark .paw-tooltip-content {\n      color: #ccc;\n    }\n\n    .paw-tooltip-progress {\n      padding: 0 20px 16px;\n    }\n\n    .paw-progress-bar {\n      height: 4px;\n      background: #e5e5e5;\n      border-radius: 2px;\n      overflow: hidden;\n    }\n\n    .paw-tooltip-dark .paw-progress-bar {\n      background: #333;\n    }\n\n    .paw-progress-fill {\n      height: 100%;\n      background: ${e};\n      transition: width ${n}ms ease;\n    }\n\n    .paw-tooltip-footer {\n      padding: 16px 20px;\n      border-top: 1px solid #e5e5e5;\n    }\n\n    .paw-tooltip-dark .paw-tooltip-footer {\n      border-top-color: #333;\n    }\n\n    .paw-tooltip-buttons {\n      display: flex;\n      gap: 8px;\n      justify-content: flex-end;\n    }\n\n    /* Button Styles */\n    .paw-button {\n      padding: 8px 16px;\n      border-radius: 6px;\n      border: none;\n      font-size: 14px;\n      font-weight: 500;\n      cursor: pointer;\n      transition: all ${n}ms ease;\n      outline: none;\n    }\n\n    .paw-button:focus-visible {\n      box-shadow: 0 0 0 2px ${e}40;\n    }\n\n    .paw-button-primary {\n      background: ${e};\n      color: white;\n    }\n\n    .paw-button-primary:hover {\n      background: #0052cc;\n    }\n\n    .paw-button-secondary {\n      background: transparent;\n      color: #666;\n      border: 1px solid #e5e5e5;\n    }\n\n    .paw-button-secondary:hover {\n      background: #f5f5f5;\n      border-color: #d5d5d5;\n    }\n\n    .paw-tooltip-dark .paw-button-secondary {\n      color: #ccc;\n      border-color: #444;\n    }\n\n    .paw-tooltip-dark .paw-button-secondary:hover {\n      background: #2a2a2a;\n      border-color: #555;\n    }\n\n    /* Backdrop Styles */\n    .paw-backdrop {\n      backdrop-filter: blur(2px);\n    }\n\n    /* Highlight Styles */\n    .paw-highlight {\n      pointer-events: none;\n    }\n\n    .paw-highlight-active {\n      animation: paw-pulse 2s infinite;\n    }\n\n    @keyframes paw-pulse {\n      0% {\n        box-shadow: 0 0 0 4px rgba(0, 102, 255, 0.2);\n      }\n      50% {\n        box-shadow: 0 0 0 8px rgba(0, 102, 255, 0.1);\n      }\n      100% {\n        box-shadow: 0 0 0 4px rgba(0, 102, 255, 0.2);\n      }\n    }\n\n    /* Animations */\n    .paw-tooltip-active {\n      animation: paw-fadein ${n}ms ease;\n    }\n\n    @keyframes paw-fadein {\n      from {\n        opacity: 0;\n        transform: translateY(10px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    /* Responsive */\n    @media (max-width: 480px) {\n      .paw-tooltip {\n        max-width: calc(100vw - 32px);\n        min-width: calc(100vw - 32px);\n      }\n    }\n\n    /* Accessibility */\n    .paw-button:focus-visible,\n    .paw-tooltip-close:focus-visible {\n      outline: 2px solid ${e};\n      outline-offset: 2px;\n    }\n\n    /* Print styles */\n    @media print {\n      .paw-widget-container,\n      .paw-backdrop,\n      .paw-highlight,\n      .paw-tooltip {\n        display: none !important;\n      }\n    }\n  `}(t);t.customStyles&&(n+="\n"+t.customStyles);const s=i("style",{id:e,type:"text/css"},n);document.head.appendChild(s),O=!0}(this.config),this.container=function(t,e){const n=`paw-container-${t}`;let s=document.getElementById(n);if(s)return s;s=i("div",{id:n,className:"paw-widget-container",style:{position:"fixed",zIndex:e.zIndex,pointerEvents:"none"}});const o=e.containerSelector||"body";return(document.querySelector(o)||document.body).appendChild(s),s}(this.instanceId,this.config),this.tourEngine=new C(this.config,this.eventBus,this.storage),this.config.apiEndpoint&&this.config.apiKey?await this.loadToursFromAPI():this.config.tours&&this.config.tours.length>0&&this.tourEngine.setTours(this.config.tours),this.setupEventListeners(),this.analytics.initialize(),this.initialized=!0,this.eventBus.emit(l,{instanceId:this.instanceId}),this.eventBus.emit(h,{instanceId:this.instanceId}),this.config.callbacks.onInit&&this.config.callbacks.onInit(this),this.config.autoStart&&setTimeout(()=>{const t=this.tourEngine.getFirstAvailableTour();t&&this.startTour(t.id)},this.config.startDelay),this.config.debug}catch(t){throw this.eventBus.emit(m,{error:t,instanceId:this.instanceId}),this.config.callbacks.onError&&this.config.callbacks.onError(t),t}}async loadToursFromAPI(){try{const t=await fetch(this.config.apiEndpoint,{method:"GET",headers:{Authorization:`Bearer ${this.config.apiKey}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`API request failed: ${t.statusText}`);const e=await t.json();e.tours&&Array.isArray(e.tours)&&this.tourEngine.setTours(e.tours)}catch(t){throw t}}setupEventListeners(){this.config.closeOnEscape&&document.addEventListener("keydown",this.handleKeyDown),this.eventBus.on(d,t=>{this.config.callbacks.onComplete&&this.config.callbacks.onComplete(t)}),this.eventBus.on(p,t=>{this.config.callbacks.onSkip&&this.config.callbacks.onSkip(t)}),this.eventBus.on(u,t=>{this.config.callbacks.onStep&&this.config.callbacks.onStep(t)})}startTour(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.initialized||this.destroyed)return!1;try{const n=this.tourEngine.startTour(t,e);return n&&this.config.callbacks.onStart&&this.config.callbacks.onStart({tourId:t,startStep:e}),n}catch(e){return this.eventBus.emit(m,{error:e,tourId:t}),!1}}endTour(){this.tourEngine&&this.tourEngine.endTour()}nextStep(){this.tourEngine&&this.tourEngine.nextStep()}prevStep(){this.tourEngine&&this.tourEngine.prevStep()}goToStep(t){this.tourEngine&&this.tourEngine.goToStep(t)}getProgress(){return this.tourEngine?this.tourEngine.getProgress():null}getTours(){return this.tourEngine?this.tourEngine.getTours():[]}reset(){this.storage.clear(),this.tourEngine&&this.tourEngine.reset()}destroy(){if(!this.destroyed)try{this.tourEngine&&this.tourEngine.isActive()&&this.tourEngine.endTour(),this.config.closeOnEscape&&document.removeEventListener("keydown",this.handleKeyDown),this.tourEngine&&this.tourEngine.destroy(),this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.config.storage.clearOnDestroy&&this.storage.clear(),this.eventBus.removeAllListeners(),this.analytics.destroy(),this.destroyed=!0,this.initialized=!1,this.config.debug}catch(t){}}on(t,e){this.eventBus.on(t,e)}off(t,e){this.eventBus.off(t,e)}}const P=new class{constructor(){this.instances=new Map,this.globalId=0,"undefined"!=typeof window&&(window.ProductAdoptionWidget=this)}init(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const e=function(t){var e;const n=[];t.tours&&!Array.isArray(t.tours)&&n.push("tours must be an array"),void 0!==t.apiKey&&"string"!=typeof t.apiKey&&n.push("apiKey must be a string"),void 0!==t.apiEndpoint&&null!==t.apiEndpoint&&"string"!=typeof t.apiEndpoint&&n.push("apiEndpoint must be a string or null"),t.tours&&Array.isArray(t.tours)&&t.tours.forEach((t,e)=>{t.id||n.push(`Tour at index ${e} must have an id`),t.steps&&Array.isArray(t.steps)||n.push(`Tour ${t.id||e} must have a steps array`),t.steps&&0===t.steps.length&&n.push(`Tour ${t.id||e} must have at least one step`)}),t.theme&&!["light","dark","auto"].includes(t.theme)&&n.push("theme must be one of: light, dark, auto");const i=["top-left","top-right","bottom-left","bottom-right"];return t.position&&!i.includes(t.position)&&n.push(`position must be one of: ${i.join(", ")}`),null!==(e=t.storage)&&void 0!==e&&e.type&&!["localStorage","sessionStorage","cookie"].includes(t.storage.type)&&n.push("storage.type must be one of: localStorage, sessionStorage, cookie"),{valid:0===n.length,errors:n}}(t);if(!e.valid)throw new Error(`Invalid configuration: ${e.errors.join(", ")}`);const n={...r,...t,instanceId:"paw-"+ ++this.globalId},i=new N(n);return this.instances.set(n.instanceId,i),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>i.initialize()):i.initialize(),i}catch(t){throw t}}getInstance(t){return this.instances.get(t)||null}destroy(t){const e=this.instances.get(t);e&&(e.destroy(),this.instances.delete(t))}destroyAll(){this.instances.forEach(t=>t.destroy()),this.instances.clear()}getVersion(){return"1.0.0"}};return e=e.default})());